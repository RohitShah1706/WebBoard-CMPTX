function Stroke(t=Date.now(),e=boardAttributes.width,o=boardAttributes.color){this.type=this.constructor.name,this.startTime=t,this.width=e,this.color=o}function PenStroke(t,e=Date.now(),o=boardAttributes.width,r=boardAttributes.color){Stroke.call(this,e,o,r),this.points=[t]}function LineStroke(t,e=Date.now(),o=boardAttributes.width,r=boardAttributes.color){Stroke.call(this,e,o,r),this.startPoint=t,this.endPoint=t}function CircleStroke(t,e=Date.now(),o=boardAttributes.width,r=boardAttributes.color){Stroke.call(this,e,o,r),this.startPoint=t,this.endPoint=t}function QuadStroke(t,e=Date.now(),o=boardAttributes.width,r=boardAttributes.color){Stroke.call(this,e,o,r),this.startPoint=t,this.endPoint=t}function Eraser(t,e=Date.now(),o=boardAttributes.width+25,r="white"){Stroke.call(this,e,o,r),this.points=[t]}Stroke.prototype.optimize=function(){},Stroke.prototype.update=function(t){},Stroke.prototype.mouseLeave=function(t){},Stroke.prototype.stop=function(t){},Stroke.prototype.render=function(t){},strokeList={PenStroke:PenStroke,LineStroke:LineStroke,CircleStroke:CircleStroke,QuadStroke:QuadStroke,Eraser:Eraser},PenStroke.prototype=Object.create(Stroke.prototype),PenStroke.prototype.constructor=PenStroke,PenStroke.prototype.update=function(t){this.points.push(t)},PenStroke.prototype.optimize=function(){},PenStroke.prototype.mouseLeave=function(t){sessionObject.pages[boardArea.currentPageIndex+boardArea.focus_page].strokeList.push(this),boardArea.currentStroke=void 0,boardArea.context.globalCompositeOperation="source-over",boardArea.copyTemp()},PenStroke.prototype.stop=PenStroke.prototype.mouseLeave,PenStroke.prototype.render=function(t,e,o,r=boardArea.margin_x,i=boardArea.margin_y,n=boardArea.scale){function a(t,e){return{x:t.x+(e.x-t.x)/2,y:t.y+(e.y-t.y)/2}}t.globalCompositeOperation="source-over",t.lineJoin=boardArea.temp_context.lineCap=t.lineCap=boardArea.temp_context.lineJoin="round",t.lineJoin=t.lineCap="round";var s=this.points;if(!(s.length<2)){var p=s[0],c=s[1];t.strokeStyle=this.color,t.lineWidth=correctWidth(this.width),t.beginPath(),moveTo(t,p.x,p.y,e,o,r,i,n);for(var d=1,u=s.length;d<u;d++){var l=a(p,c);quadraticCurveTo(t,p.x,p.y,l.x,l.y,e,o,r,i,n),p=s[d],c=s[d+1]}lineTo(t,p.x,p.y,e,o,r,i,n),t.stroke()}},LineStroke.prototype=Object.create(Stroke.prototype),LineStroke.prototype.constructor=LineStroke,LineStroke.prototype.update=function(t){this.endPoint=t},LineStroke.prototype.mouseLeave=function(t){sessionObject.pages[boardArea.currentPageIndex+boardArea.focus_page].strokeList.push(this),boardArea.currentStroke=void 0,boardArea.context.globalCompositeOperation="source-over",boardArea.copyTemp()},LineStroke.prototype.stop=LineStroke.prototype.mouseLeave,LineStroke.prototype.render=function(t,e,o,r=boardArea.margin_x,i=boardArea.margin_y,n=boardArea.scale){t.globalCompositeOperation="source-over",t.lineJoin=boardArea.temp_context.lineCap=t.lineCap=boardArea.temp_context.lineJoin="round",t.lineJoin=t.lineCap="round",t.strokeStyle=this.color,t.lineWidth=correctWidth(this.width),t.beginPath(),moveTo(t,this.startPoint.x,this.startPoint.y,e,o,r,i,n),lineTo(t,this.endPoint.x,this.endPoint.y,e,o,r,i,n),t.stroke()},CircleStroke.prototype=Object.create(Stroke.prototype),CircleStroke.prototype.constructor=CircleStroke,CircleStroke.prototype.update=function(t){this.endPoint=t},CircleStroke.prototype.mouseLeave=function(t){sessionObject.pages[boardArea.currentPageIndex+boardArea.focus_page].strokeList.push(this),boardArea.currentStroke=void 0,boardArea.context.globalCompositeOperation="source-over",boardArea.copyTemp()},CircleStroke.prototype.stop=CircleStroke.prototype.mouseLeave,CircleStroke.prototype.render=function(t,e,o,r=boardArea.margin_x,i=boardArea.margin_y,n=boardArea.scale){t.lineJoin=boardArea.temp_context.lineCap=t.lineCap=boardArea.temp_context.lineJoin="round",t.lineJoin=t.lineCap="round",t.globalCompositeOperation="source-over",t.strokeStyle=this.color,t.lineWidth=correctWidth(this.width),t.beginPath(),arc(t,this.startPoint.x,this.startPoint.y,this.endPoint.x,this.endPoint.y,e,o,initialAngle=0,finalAngle=2*Math.PI,r,i,n),t.stroke()},QuadStroke.prototype=Object.create(Stroke.prototype),QuadStroke.prototype.constructor=QuadStroke,QuadStroke.prototype.update=function(t){this.endPoint=t},QuadStroke.prototype.mouseLeave=function(t){sessionObject.pages[boardArea.currentPageIndex+boardArea.focus_page].strokeList.push(this),boardArea.currentStroke=void 0,boardArea.context.globalCompositeOperation="source-over",boardArea.copyTemp()},QuadStroke.prototype.stop=QuadStroke.prototype.mouseLeave,QuadStroke.prototype.render=function(t,e,o,r=boardArea.margin_x,i=boardArea.margin_y,n=boardArea.scale){t.lineJoin=boardArea.temp_context.lineCap=t.lineCap=boardArea.temp_context.lineJoin="round",t.globalCompositeOperation="source-over",t.lineJoin=t.lineCap="round",t.strokeStyle=this.color,t.lineWidth=correctWidth(this.width),t.beginPath(),moveTo(t,this.startPoint.x,this.startPoint.y,e,o,r,i,n),lineTo(t,this.startPoint.x,this.endPoint.y,e,o,r,i,n),lineTo(t,this.endPoint.x,this.endPoint.y,e,o,r,i,n),lineTo(t,this.endPoint.x,this.startPoint.y,e,o,r,i,n),lineTo(t,this.startPoint.x,this.startPoint.y,e,o,r,i,n),t.stroke()},Eraser.prototype=Object.create(Stroke.prototype),Eraser.prototype.constructor=Eraser,Eraser.prototype.update=function(t){this.points.push(t)},Eraser.prototype.mouseLeave=function(t){sessionObject.pages[boardArea.currentPageIndex+boardArea.focus_page].strokeList.push(this),boardArea.currentStroke=void 0,boardArea.copyTemp()},Eraser.prototype.stop=Eraser.prototype.mouseLeave,Eraser.prototype.render=function(t,e,o,r=boardArea.margin_x,i=boardArea.margin_y,n=boardArea.scale){function a(t,e){return{x:t.x+(e.x-t.x)/2,y:t.y+(e.y-t.y)/2}}boardArea.context.globalCompositeOperation="destination-out",t.lineJoin=boardArea.temp_context.lineCap=t.lineCap=boardArea.temp_context.lineJoin="round",t.lineJoin=t.lineCap="round";var s=this.points;if(!(s.length<2)){var p=s[0],c=s[1];t.strokeStyle=this.color,t.lineWidth=correctWidth(this.width),t.beginPath(),moveTo(t,p.x,p.y,e,o,r,i,n);for(var d=1,u=s.length;d<u;d++){var l=a(p,c);quadraticCurveTo(t,p.x,p.y,l.x,l.y,e,o,r,i,n),p=s[d],c=s[d+1]}lineTo(t,p.x,p.y,e,o,r,i,n),t.stroke()}};